### prelude

# Five Days Of Milan 61100
country_event = {
	id = 66100
	title = "EVTNAME66100" 
	desc = "EVTDESC66100"
	picture = "fivedays"
	
	fire_only_once = yes

	trigger = {
		has_global_flag = hungarian_revolution_occurred
		tag = AUS
		owns = 726
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		set_global_flag = five_days_of_milan
	}

	option = {
		name = "EVT66100OPTA"
		726 = {
			change_controller = REB
			add_province_modifier = {
				name = nationalist_agitation
				duration = 1095
			}
		}
	}

}

# Republic of San Marco 61101
country_event = {
  id = 66101
  title = "EVTNAME66101"
  desc = "EVTDESC66101"
  picture = "sanmarco"

  trigger = {
    has_global_flag = five_days_of_milan
    tag = AUS
		AUS = {
			owns = 729
    }
  }
  
  mean_time_to_happen = { 
    days = 7
  }
  
  immediate = {
		set_global_flag = republic_san_marco
	}
  
  option = {
		name = "EVT66101OPTA"
		any_owned = {
			limit = {
				is_core = VEN
			}
			secede_province = VEN
		}
		relation = { who = VEN value = -100 }
		any_owned = {
			limit = { is_core = AUS }
			remove_province_modifier = liberal_agitation
		}
		any_pop = {
			limit = { is_primary_culture = yes }
			militancy = -6
		}
    any_pop = {
			limit = { 
				OR = {
					has_pop_culture = north_italian
					has_pop_culture = south_italian
					}
			}
			militancy = 4
			consciousness = 6
		}
		random_owned = {
			limit = {
				owner = {
					OR = {
						national_provinces_occupied = .25
						any_greater_power = { war_with = THIS }
					}
				}
			}
			owner = {
				prestige = -10
				war = {
					target = VEN
					attacker_goal = {
						casus_belli = annex_core_country
					}
					call_ally = yes
				}
			}
		}
		random_owned = {
			limit = {
				owner = {
					NOT = {
						national_provinces_occupied = .25
						any_greater_power = { war_with = THIS }
					}
				}
			}
			owner = {
				prestige = 20
				war = {
					target = VEN
					attacker_goal = {
						casus_belli = annex_core_country
					}
				}
			}
		}
		
		VEN = {
			capital = 729
			government = democracy
			political_reform = mandatory_service 
			political_reform = non_secret_ballots
			political_reform = universal_weighted_voting
			political_reform = population_equal_weight
			political_reform = free_press
			political_reform = yes_meeting
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			clr_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			set_country_flag = democracy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = anarcho_liberal_gov
			define_general = {
        name = "Daniele Manin"
        background = nationalist
        personality = inspiring
      }
		}
		ai_chance = {
			factor = 95
		}
	}
  
	option = {
		name = "EVT66101OPTB"
		set_country_flag = austria_let_venice_go
		any_owned = {
			limit = {
				is_core = VEN
			}
			secede_province = VEN
		}
		relation = { who = VEN value = -100 }
		prestige = -25
		casus_belli = {
			target = VEN
			type = cut_down_to_size
			months = 60
		}
		any_pop = {
			limit = {
				has_pop_culture = romanian
				location = { is_core = ROM }
			}
			militancy = 8
		}
		any_pop = {
			limit = {
				has_pop_culture = polish
				location = { is_core = POL }
			}
			militancy = 8
		}
		any_pop = {
			limit = {
				has_pop_culture = north_italian
				location = { is_core = ITA }
			}
			militancy = 8
		}
		any_owned = {
			limit = {
				OR = {
					is_core = POL
					is_core = ROM
					is_core = ITA
				}
			}
			add_province_modifier = {
				name = nationalist_agitation
				duration = 1095
			}
		}
		VEN = {
			capital = 729
			government = democracy
			political_reform = non_secret_ballots
			political_reform = universal_weighted_voting
			political_reform = population_equal_weight
			political_reform = free_press
			political_reform = yes_meeting
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			clr_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			set_country_flag = democracy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = anarcho_liberal_gov
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				any_greater_power = { war_with = THIS }
			}
			modifier = {
				factor = 2
				national_provinces_occupied = 0.25
			}
			modifier = {
				factor = 0
				war = no
				NOT = { revolt_percentage = 0.25 }
			}
		}
	}

	option = {
		name = "EVT66101OPTC"
		any_owned = {
			limit = {
				is_core = VEN
			}
			secede_province = VEN
		}
		relation = { who = VEN value = -100 }
		any_owned = {
			limit = { is_core = AUS }
			remove_province_modifier = liberal_agitation
		}
		any_pop = {
			limit = { is_primary_culture = yes }
			militancy = -6
		}
		any_pop = {
			limit = { 
				OR = {
					has_pop_culture = north_italian
					has_pop_culture = south_italian
					}
			}
			militancy = 4
			consciousness = 6
		}
		random_owned = {
			limit = {
				owner = {
					OR = {
						national_provinces_occupied = .25
						any_greater_power = { war_with = THIS }
					}
				}
			}
			owner = {
				prestige = -10
				war = {
					target = VEN
					attacker_goal = {
						casus_belli = annex_core_country
					}
					call_ally = yes
				}
			}
		}
		random_owned = {
			limit = {
				owner = {
					NOT = {
						national_provinces_occupied = .25
						any_greater_power = { war_with = THIS }
					}
				}
			}
			owner = {
				prestige = 20
				war = {
					target = VEN
					attacker_goal = {
						casus_belli = annex_core_country
					}
				}
			}
		}
		VEN = {
			capital = 729
			government = democracy
			political_reform = mandatory_service 
			political_reform = non_secret_ballots
			political_reform = universal_weighted_voting
			political_reform = population_equal_weight
			political_reform = free_press
			political_reform = yes_meeting
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			clr_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			set_country_flag = democracy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = anarcho_liberal_gov
			define_general = {
        name = "Daniele Manin"
        background = nationalist
        personality = inspiring
      }
		}
		change_tag_no_core_switch = VEN
		ai_chance = {
			factor = 0
		}
	}
}

### war

# Papal States to join Sardinia 61102
country_event = {
	id = 61102
	title = "EVTNAME66102"
	desc = "EVTDESC66102"
	picture = "sanmarco"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPT66102A"
		set_global_flag = pap_joined
		
		relation = {
			who = FROM
			value = 200
		}
		create_alliance = FROM
		any_pop = {
			militancy = -2
		}
		
		ai_chance = { factor = 66 }
	}
	
	option = {
		name = "EVTOPT66102B"
		
		set_global_flag = pap_refused
		
		ai_chance = { factor = 34 }
	}
	
}
# Two Sicilies to join Sardinia 61103
country_event = {
	id = 61103
	title = "EVTNAME66103"
	desc = "EVTDESC66103"
	picture = "sanmarco"

	is_triggered_only = yes

	option = {
		name = "EVTOPT66103A"
		
		set_global_flag = sic_joined
		
		relation = {
			who = FROM
			value = 200
		}
		create_alliance = FROM
		any_pop = {
			militancy = -2
		}
		
		ai_chance = { factor = 75 }
	}
	
	option = {
		name = "EVTOPT66103B"
		set_global_flag = sic_refused
		ai_chance = { factor = 25 }
	}
}

# Tuscany to join Sardinia 61104
country_event = {
	id = 61104
	title = "EVTNAME66104"
	desc = "EVTDESC66104"
	picture = "sanmarco"

	is_triggered_only = yes

	option = {
		name = "EVTOPT66014A"
		
		set_global_flag = tus_joined
		leave_alliance = AUS
		AUS = {
			diplomatic_influence = {
				who = THIS
				value = -500
			}
		}
		relation = {
			who = FROM
			value = 200
		}
		create_alliance = FROM
		any_pop = {
			militancy = -2
		}
		
		ai_chance = { factor = 85 }
	}
	
	option = {
		name = "EVTOPT66104B"
		set_global_flag = tus_refused
		ai_chance = { factor = 15 }
	}
}

# Modena to join Sardinia 61105
country_event = {
	id = 61105
	title = "EVTNAME66105"
	desc = "EVTDESC66105"
	picture = "sanmarco"

	is_triggered_only = yes

	option = {
		name = "EVTOPT66015A"
		
		set_global_flag = mod_joined
		leave_alliance = AUS
		AUS = {
			diplomatic_influence = {
				who = THIS
				value = -500
			}
		}
		relation = {
			who = FROM
			value = 200
		}
		create_alliance = FROM
		any_pop = {
			militancy = -2
		}
		
		ai_chance = { factor = 85 }
	}
	
	option = {
		name = "EVTOPT66105B"
		set_global_flag = mod_refused
		ai_chance = { factor = 15 }
	}
}

# Parma to join Sardinia 61106
country_event = {
	id = 61106
	title = "EVTNAME66106"
	desc = "EVTDESC66106"
	picture = "sanmarco"

	is_triggered_only = yes

	option = {
		name = "EVTOPT66016A"
		
		set_global_flag = par_joined
		leave_alliance = AUS
		AUS = {
			diplomatic_influence = {
				who = THIS
				value = -500
			}
		}
		relation = {
			who = FROM
			value = 200
		}
		create_alliance = FROM
		any_pop = {
			militancy = -2
		}
		
		ai_chance = { factor = 85 }
	}
	
	option = {
		name = "EVTOPT66106B"
		set_global_flag = par_refused
		ai_chance = { factor = 15 }
	}
}

### aftermath

#Sardinia lost 61107
country_event = {
	id = 61107
	title = "EVTNAME66107"
	desc = "EVTDESC66107"
	picture = "sanmarco"
	
	trigger = {
		has_global_flag = declared_war_italian_independence
		SAR = { war = no }
		AUS = { owns = 726 }
	}
	
	mean_time_to_happen = { days = 1 }
	
	fire_only_once = yes
	
	option = {
		name = "EVTOPT61107A"
		effect = {
			set_global_flag = sardinia_lost	
		}
	}
}

#Sardinia won 61108
country_event = {
	id = 61108
	title = "EVTNAME66108"
	desc = "EVTDESC66108"
	picture = "sanmarco"
	
	trigger = {
		has_global_flag = declared_war_italian_independence
		SAR = { war = no }
		726 = { NOT = { owner = AUS } }
	}
	
	option = {
		name = "EVTOPT61107A"	
		effect = {
			set_global_flag = sardinia_won	
		}
	}
}

## if sardinia lost, go back to soi you little italian minors

# Tuscany 61109
country_event = {
	id = 61109
	title = "EVTNAME66109"
	desc = "EVTDESC66109"
	picture = "sanmarco"
	
	trigger = {
		has_global_flag = sardinia_lost
		has_global_flag = tus_joined
	}
	
	mean_time_to_happen = { days = 1 }
	
	option = {
		name = "EVTOPT61108A"
		effect = {
			AUS = {
				diplomatic_influence = {
					who = THIS
					value = 500
				}
			create_alliance = THIS
			}
		}
	}
}
# Modena 61110
country_event = {
	id = 61110
	title = "EVTNAME66110"
	desc = "EVTDESC66110"
	picture = "sanmarco"
	
	trigger = {
		has_global_flag = sardinia_lost
		has_global_flag = mod_joined
	}
	
	mean_time_to_happen = { days = 1 }
	
	option = {
		name = "EVTOPT61109A"
		effect = {
			AUS = {
				diplomatic_influence = {
					who = THIS
					value = 500
				}
			create_alliance = THIS
			}
		}
	}
}
# Parma 61111
country_event = {
	id = 61111
	title = "EVTNAME66109"
	desc = "EVTDESC66109"
	picture = "sanmarco"
	
	trigger = {
		has_global_flag = sardinia_lost
		has_global_flag = par_joined
	}
	
	mean_time_to_happen = { days = 1 }
	
	option = {
		name = "EVTOPT61109A"
		effect = {
			AUS = {
				diplomatic_influence = {
					who = THIS
					value = 500
				}
			create_alliance = THIS
			}
		}
	}
}
